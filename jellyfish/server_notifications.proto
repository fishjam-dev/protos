syntax = "proto3";

package Jellyfish.Server;

message ControlMessage {
  oneof content {
    ServerNotification.RoomNotification roomCrashed = 1;
    ServerNotification.PeerNotification peerConnected = 2;
    ServerNotification.PeerNotification peerDisconnected = 3;
    ServerNotification.PeerNotification peerCrashed = 4;
    ServerNotification.ComponentNotification componentCrashed = 5;
    ServerNotification.Authenticated authenticated = 6;

    ClientMessage.TokenMessage authRequest=7;
  }
}

message ClientMessage {
  message TokenMessage{
    string token=1;
  }
}

message ServerNotification {
    message Authenticated{}

    message RoomNotification{
        string roomId=1;
    }

    message PeerNotification{
        string roomId=1;
        string peerId=2;
    }

    message ComponentNotification{
        string roomId=1;
        string componentId=2;
    }
}